---
title: Matlab 遗传算法——背包问题
date: 2024-03-18 11:00:00 +0800
categories: [Notes, Matlab]
tags: [matlab, incomplete]
pin: false
author: jo
toc: true
commments: true
typora-root-url: ../../Jo-CRuiSe.github.io/
math: true
mermaid: false
---

>[MATLAB函数文档(CN)](https://ww2.mathworks.cn/help/matlab/referencelist.html)

## 例题描述

有16件物品，各有不同的体积、重量和价值，具体下图所示。要求选择其中若干件放入一个背包，使放入的物品总价值尽量高。该背包容量不超过93（体积单位），可承受重量不超过88（重量单位）。

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351 73"><rect x="0.5" y="0.39" width="350" height="18" style="fill:var(--mask-bg);"/><rect x="0.78" y="36.5" width="350" height="18" style="fill:none"/><rect x="0.5" y="0.5" width="350" height="72" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="0.49" y1="18.5" x2="350.51" y2="18.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="0.78" y1="54.5" x2="350.79" y2="54.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="0.49" y1="36.5" x2="350.51" y2="36.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="30.5" y1="72.5" x2="30.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="50.5" y1="72.5" x2="50.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="70.5" y1="72.5" x2="70.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="110.5" y1="72.5" x2="110.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="90.5" y1="72.5" x2="90.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="170.5" y1="72.5" x2="170.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="150.5" y1="72.5" x2="150.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="290.5" y1="72.5" x2="290.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="310.5" y1="72.5" x2="310.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="250.5" y1="72.5" x2="250.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="190.5" y1="72.5" x2="190.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="270.5" y1="72.5" x2="270.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="330.5" y1="72.5" x2="330.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="210.5" y1="72.5" x2="210.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="230.5" y1="72.5" x2="230.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="130.5" y1="72.5" x2="130.5" y2="0.5" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><text transform="translate(37.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><text transform="translate(56.8 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">2</text><rect x="72.4" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(77.18 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="92.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(97.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="112.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(117.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="132.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(137.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">6</text><rect x="152.52" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(157.31 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="172.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(177.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="192.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(197.42 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">9</text><rect x="212.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(213.4 14.21)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">10</text><rect x="232.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(234.39 14.05)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">11</text><rect x="252.53" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(253.43 14.05)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">12</text><rect x="272.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(273.14 14.05)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">13</text><rect x="292.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(293.85 14.05)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">14</text><rect x="312.64" y="2.82" width="15.72" height="14.01" style="fill:none"/><text transform="translate(313.26 14.08)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">15</text><rect x="332.79" y="2.78" width="15.72" height="14.01" style="fill:none"/><text transform="translate(333.49 14.05)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">16</text><text transform="translate(37.65 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><text transform="translate(57.03 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="72.63" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(77.41 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="92.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(94.19 31.85)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">11</text><rect x="112.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(114.89 31.85)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">19</text><rect x="132.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(137.65 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="152.75" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(157.53 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="172.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(177.65 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">9</text><rect x="192.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(194.14 31.88)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">16</text><rect x="212.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(217.81 32.01)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="232.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(237.29 31.85)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="252.75" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(257.61 32.01)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="272.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(277.54 32)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="292.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(297.52 31.98)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="312.87" y="20.62" width="15.72" height="14.01" style="fill:none"/><text transform="translate(316.93 32.01)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="333.01" y="20.58" width="15.72" height="14.01" style="fill:none"/><text transform="translate(333.72 31.85)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">12</text><rect x="32.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(34.02 50.37)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">12</text><rect x="52.25" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(57.03 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="72.63" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(77.41 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">9</text><rect x="92.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(97.65 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">6</text><rect x="112.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(117.65 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="132.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(137.65 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="152.75" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(157.53 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="172.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(177.65 50.24)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">6</text><rect x="192.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(194 50.5)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">18</text><rect x="212.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(217.27 50.63)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">2</text><rect x="232.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(237.29 50.2)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="252.75" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(257.61 50.37)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">6</text><rect x="272.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(277.54 50.36)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">2</text><rect x="292.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(297.52 50.34)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">9</text><rect x="312.87" y="38.97" width="15.72" height="14.01" style="fill:none"/><text transform="translate(316.93 50.37)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="333.01" y="38.94" width="15.72" height="14.01" style="fill:none"/><text transform="translate(337.23 50.2)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="32.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(37.65 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">9</text><rect x="52.25" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(57.03 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="72.63" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(77.41 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="92.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(97.65 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">8</text><rect x="112.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(113.64 68.25)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">18</text><rect x="132.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(137.65 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">7</text><rect x="152.75" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(157.53 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="172.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(173.72 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">10</text><rect x="192.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(193.86 68.29)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">18</text><rect x="212.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(217.16 68.42)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="232.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(237.11 68.42)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="252.75" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(253.66 68.25)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">12</text><rect x="272.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(277.54 68.41)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">3</text><rect x="292.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(297.52 68.39)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">5</text><rect x="312.87" y="57.02" width="15.72" height="14.01" style="fill:none"/><text transform="translate(316.93 68.42)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">4</text><rect x="333.01" y="56.99" width="15.72" height="14.01" style="fill:none"/><text transform="translate(337.41 68.54)" style="font-size:12px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">6</text><text transform="translate(4.44 14.2)" style="font-size:11px;fill:var(--text-color);font-family:STHeiti">物品</text><text transform="translate(4.44 32)" style="font-size:11px;fill:var(--text-color);font-family:STHeiti">体积</text><rect x="3.97" y="40.18" width="22.95" height="10.65" style="fill:none"/><text transform="translate(4.44 49.88)" style="font-size:11px;fill:var(--text-color);font-family:STHeiti">重量</text><rect x="3.97" y="58.71" width="22.95" height="10.65" style="fill:none"/><text transform="translate(4.44 68.41)" style="font-size:11px;fill:var(--text-color);font-family:STHeiti">价值</text></svg>

## 变量及名词解释

### 需要的变量（部分）

|         变量名          |                 含义                 |
| :---------------------: | :----------------------------------: |
|        `volumes`        | 数组中每个元素表示相应下标物体的体积 |
|        `weight`         | 数组中每个元素表示相应下标物体的重量 |
|        `values`         | 数组中每个元素表示相应下标物体的价值 |
|    `volumeCapacity`     |             背包最大容量             |
|    `weightCapacity`     |           背包最大承重能力           |
|    `populationSize`     |               种群数量               |
|     `maxIteration`      |             最大迭代次数             |
|      `population`       |          用`0/1`表示的种群           |
|      `bestFitness`      |        最佳适应度（最大价值）        |
|     `bestSolution`      |                最优解                |
|  `correspondingVolume`  |            最优解相应体积            |
|  `correspondingWeight`  |            最优解相应重量            |
|  `surviveProbability`   |               生存概率               |
| `cumulativeProbability` |  处理后的生存概率，便于用“轮盘赌法”  |
| `crossoverProbability`  |           发生交叉互换概率           |
|  `mutationProbability`  |               变异概率               |

### 种群

种群内是否含有个体用`0/1`表示，`0`代表不含有，`1`代表含有

例如在`0101000101101000`中，代表物品2、4、8、10、11、13装入背包中

### 适应度

由约束条件：

$$
\sum_{i}^{16} m_{i} \le 88
$$

当含有`0/1`的字符串对应的物体质量超过88，则该个体被淘汰

例如`1111011111011101`对应质量为

$$
12+7+9+6+0+8+5+6+18+2+0+6+2+9+0+4=94 > 88
$$

该个体被淘汰

### 选择

采用似赌轮的方式进行选择，使用`rand()`函数生成要筛选出的个体

<div style="display:flex; flex-direction: column; max-width: 400px; align-items: center; justify-content: center; margin: auto;"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 154.98 42.19"><line x1="2.86" y1="29.37" x2="152.86" y2="29.04" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><circle cx="2.86" cy="29.2" r="1.5" style="fill:var(--text-color)"/><circle cx="50.26" cy="29.2" r="1.5" style="fill:var(--text-color)"/><circle cx="85.06" cy="29.2" r="1.5" style="fill:var(--text-color)"/><circle cx="125.73" cy="29.2" r="1.5" style="fill:var(--text-color)"/><circle cx="152.86" cy="29.2" r="1.5" style="fill:var(--text-color)"/><text transform="translate(0.81 39.73)" style="font-size:8px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><text transform="translate(41.23 39.73)" style="font-size:8px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0.316</text><text transform="translate(76.03 39.73)" style="font-size:8px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0.548</text><rect x="53.54" y="4.96" width="24.67" height="10.61" style="fill:none"/><text transform="translate(115.21 39.73)" style="font-size:8px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0.8191</text><rect x="40.6" width="5.73" height="10.61" style="fill:none"/><text transform="translate(150.88 39.73)" style="font-size:8px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text></svg></div>

使用`rand()`生成一个0～1的数字，例如生成0.735，则生存概率小于0.735的个体死亡

### 配对交叉

随机选取个体，两两一组，随机进行某一位点的交叉互换

例如对于个体`1001101000000100`和`0101000101101000`

假若选到2～5位点互换：

<div style="display:flex; flex-direction: column; max-width: 400px; align-items: center; justify-content: center; margin: auto;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 321 211.5"><g id="Layer_1" data-name="Layer 1"><line x1="60.5" y1="8.37" x2="60.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="40.5" y1="8.37" x2="40.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="20.5" y1="8.37" x2="20.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><rect x="0.5" y="8.37" width="320" height="20" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="80.5" y1="8.37" x2="80.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="100.5" y1="8.37" x2="100.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="120.5" y1="8.37" x2="120.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="140.5" y1="8.37" x2="140.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="160.5" y1="8.37" x2="160.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="180.5" y1="8.37" x2="180.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="200.5" y1="8.37" x2="200.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="220.5" y1="8.37" x2="220.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="240.5" y1="8.37" x2="240.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="260.5" y1="8.37" x2="260.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="280.5" y1="8.37" x2="280.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="300.5" y1="8.37" x2="300.5" y2="28.37" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><text transform="translate(6.91 23.76)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><text transform="translate(26.91 23.76)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="43.04" y="7.63" width="14.92" height="14.76" style="fill:none"/><text transform="translate(46.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="63.04" y="7.63" width="14.92" height="14.76" style="fill:none"/><text transform="translate(66.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="83.04" y="7.63" width="14.92" height="14.76" style="fill:none"/><text transform="translate(86.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="103.04" y="7.63" width="14.92" height="14.76" style="fill:none"/><text transform="translate(106.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="123.04" y="7.63" width="14.92" height="14.76" style="fill:none"/><text transform="translate(126.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="143.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(146.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="163.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(166.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="183.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(186.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="203.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(206.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="223.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(226.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="243.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(246.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="263.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(266.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="283.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(286.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="303.04" y="7.15" width="14.92" height="14.76" style="fill:none"/><text transform="translate(306.91 22.9)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><line x1="60.5" y1="144.2" x2="60.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="40.5" y1="144.2" x2="40.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="20.5" y1="144.2" x2="20.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><rect x="0.5" y="144.2" width="320" height="20" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="80.5" y1="144.2" x2="80.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="100.5" y1="144.2" x2="100.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="120.5" y1="144.2" x2="120.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="140.5" y1="144.2" x2="140.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="160.5" y1="144.2" x2="160.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="180.5" y1="144.2" x2="180.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="200.5" y1="144.2" x2="200.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="220.5" y1="144.2" x2="220.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="240.5" y1="144.2" x2="240.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="260.5" y1="144.2" x2="260.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="280.5" y1="144.2" x2="280.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="300.5" y1="144.2" x2="300.5" y2="164.2" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><text transform="translate(6.91 159.59)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><text transform="translate(26.91 159.59)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="43.04" y="143.46" width="14.92" height="14.76" style="fill:none"/><text transform="translate(46.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="63.04" y="143.46" width="14.92" height="14.76" style="fill:none"/><text transform="translate(66.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="83.04" y="143.46" width="14.92" height="14.76" style="fill:none"/><text transform="translate(86.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="103.04" y="143.46" width="14.92" height="14.76" style="fill:none"/><text transform="translate(106.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="123.04" y="143.46" width="14.92" height="14.76" style="fill:none"/><text transform="translate(126.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="143.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(146.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="163.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(166.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="183.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(186.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="203.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(206.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="223.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(226.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="243.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(246.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="263.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(266.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="283.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(286.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="303.04" y="142.98" width="14.92" height="14.76" style="fill:none"/><text transform="translate(306.91 158.73)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text></g><g id="Layer_1_copy" data-name="Layer 1 copy"><line x1="60.5" y1="55.17" x2="60.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="40.5" y1="55.17" x2="40.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="20.5" y1="55.17" x2="20.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><rect x="0.5" y="55.17" width="320" height="20" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="80.5" y1="55.17" x2="80.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="100.5" y1="55.17" x2="100.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="120.5" y1="55.17" x2="120.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="140.5" y1="55.17" x2="140.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="160.5" y1="55.17" x2="160.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="180.5" y1="55.17" x2="180.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="200.5" y1="55.17" x2="200.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="220.5" y1="55.17" x2="220.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="240.5" y1="55.17" x2="240.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="260.5" y1="55.17" x2="260.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="280.5" y1="55.17" x2="280.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="300.5" y1="55.17" x2="300.5" y2="75.17" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><text transform="translate(6.91 70.55)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><text transform="translate(26.91 70.55)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="43.04" y="54.43" width="14.92" height="14.76" style="fill:none"/><text transform="translate(46.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="63.04" y="54.43" width="14.92" height="14.76" style="fill:none"/><text transform="translate(66.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="83.04" y="54.43" width="14.92" height="14.76" style="fill:none"/><text transform="translate(86.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="103.04" y="54.43" width="14.92" height="14.76" style="fill:none"/><text transform="translate(106.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="123.04" y="54.43" width="14.92" height="14.76" style="fill:none"/><text transform="translate(126.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="143.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(146.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="163.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(166.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="183.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(186.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="203.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(206.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="223.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(226.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="243.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(246.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="263.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(266.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="283.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(286.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="303.04" y="53.95" width="14.92" height="14.76" style="fill:none"/><text transform="translate(306.91 69.69)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="17.96" y="1" width="85.08" height="80.55" rx="8.01" style="fill:none;stroke:#ed1c24;stroke-miterlimit:10;stroke-width:2px"/><line x1="60.5" y1="191" x2="60.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="40.5" y1="191" x2="40.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="20.5" y1="191" x2="20.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><rect x="0.5" y="191" width="320" height="20" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="80.5" y1="191" x2="80.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="100.5" y1="191" x2="100.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="120.5" y1="191" x2="120.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="140.5" y1="191" x2="140.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="160.5" y1="191" x2="160.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="180.5" y1="191" x2="180.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="200.5" y1="191" x2="200.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="220.5" y1="191" x2="220.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="240.5" y1="191" x2="240.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="260.5" y1="191" x2="260.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="280.5" y1="191" x2="280.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="300.5" y1="191" x2="300.5" y2="211" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><text transform="translate(6.91 206.39)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><text transform="translate(26.91 206.39)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="43.04" y="190.26" width="14.92" height="14.76" style="fill:none"/><text transform="translate(46.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="63.04" y="190.26" width="14.92" height="14.76" style="fill:none"/><text transform="translate(66.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="83.04" y="190.26" width="14.92" height="14.76" style="fill:none"/><text transform="translate(86.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="103.04" y="190.26" width="14.92" height="14.76" style="fill:none"/><text transform="translate(106.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="123.04" y="190.26" width="14.92" height="14.76" style="fill:none"/><text transform="translate(126.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="143.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(146.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="163.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(166.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="183.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(186.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="203.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(206.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="223.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(226.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="243.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(246.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">1</text><rect x="263.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(266.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="283.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(286.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><rect x="303.04" y="189.78" width="14.92" height="14.76" style="fill:none"/><text transform="translate(306.91 205.52)" style="font-size:14px;fill:var(--text-color);font-family:MyriadPro-Regular, Myriad Pro">0</text><line x1="158.27" y1="87.39" x2="158.27" y2="128.54" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="163.35" y1="87.36" x2="163.35" y2="128.57" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="150.81" y1="122.82" x2="160.81" y2="130.79" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/><line x1="160.19" y1="130.79" x2="170.19" y2="122.82" style="fill:none;stroke:var(--text-color);stroke-miterlimit:10"/></g></svg></div>

### 变异

此算法仅考虑单点变异，即寻找到某个位点将数字取反

## 代码及逻辑示例

### 初始化变量

```matlab
volumeCapacity = 93; %背包容量
weightCapacity = 88; %背包承重大小
volumes = [7, 4, 8, 11, 19, 5, 3, 9, 16, 7, 8, 5, 4, 4, 3, 12]; %物品体积
weights = [12, 7, 9, 6, 7, 8, 5, 6, 18, 2, 3, 6, 2, 9, 5, 4]; %物品重量
values = [9, 8, 7, 8, 18, 7, 3, 10, 18, 4, 4, 12, 3, 5, 4, 6]; %物品价值

populationSize = 500; %种群数量
maxIteration = 200; %迭代次数

%初始化种群
population = randi([0, 1], populationSize, length(volumes));

bestFitness = 0; %最佳适应度（价值）
bestSolution = []; %最优解
correspondingWeight = 0; %最优解对应重量
correspondingVolume = 0; %最优解对应体积
```

### 总体框架

```matlab
%迭代
for generation = 1:maxIteration
	%计算适应度
	%选择
	%交叉
	%变异
	%更新种群
end

%寻找最优解
```

### 计算适应度

```matlab
fitness = zeros(populationSize, 1);
for i = 1:populationSize
		%计算每个个体的体积、重量、价值
    totalVolume = volumes * population(i, :)';
    totalWeight = weights * population(i, :)';
    totalValue = values * population(i, :)';
    %进行判断，当体积超出额定容量或重量超出背包最大承重能力时，使用默认适应度0，即将要淘汰
    if totalVolume <= volumeCapacity && totalWeight < weightCapacity
        fitness(i) = totalValue;
    end
end
```

### 选择

```matlab
surviveProbability = fitness / sum(fitness);
%将生存概率转化为累加概率，从而实现“赌轮”
cumulativeProbability = cumsum(surviveProbability);
newPopulation = zeros(populationSize, length(volumes));
for i = 1:populationSize
    r = rand();
    selectedIndividual = find(cumulativeProbability >= r, 1);
    newPopulation(i, :) = population(selectedIndividual, :);
end
```

### 交叉

```matlab
crossoverProbability = 0.8;
for i = 1:2:populationSize
    if rand() < crossoverProbability
    		%随机选择一段发生交叉互换
        crossoverPoint = randi([2 length(volumes)-1]);
        tmp = newPopulation(i, crossoverPoint+1:end);
        newPopulation(i, crossoverPoint+1:end) = newPopulation(i+1, crossoverPoint+1:end);
        newPopulation(i+1, crossoverPoint+1:end) = tmp;
    end
end
```

### 变异

```matlab
mutationProbability = 0.01;
for i  = 1:populationSize
    for j = 1:length(volumes)
        if rand() < mutationProbability
            newPopulation(i, j) = ~newPopulation(i, j);
        end
    end
end
```

> 变异概率过小会导致缺乏多样性或收敛速度慢，过大会导致失去收敛性或过早收敛
{: .prompt-warning}

### 更新种群

```matlab
population = newPopulation;
```

### 寻找最优解

```matlab
for i = 1:populationSize
    totalVolume = volumes * population(i, :)';
    totalWeight = weights * population(i, :)';
    totalValue = values * population(i, :)';
    if totalValue > bestFitness && totalWeight <= weightCapacity && totalVolume <= volumeCapacity
        bestSolution = population(i, :);
        bestFitness = totalValue;
        correspondingWeight = totalWeight;
        correspondingVolume = totalVolume;
    end
end

disp('放入物品的序号');
fprintf('    ');
for i=1:length(bestSolution)
    if bestSolution(i) == 1
        fprintf('%d ', i);
    end
end
fprintf('\n\n');
disp('最优解对应的总价值：');
disp(bestFitness);
disp('对应重量：');
disp(correspondingWeight);
disp('对应体积：');
disp(correspondingVolume);
```

>笔者发现，种群数量和迭代次数共同影响着求解结果。当种群数量很大时，很少的迭代次数反而比较多迭代次数多次运行后的结果更稳定；当迭代次数较多时，需要给予合适的初始种群数量才能使结果较为稳定
{: .prompt-info}